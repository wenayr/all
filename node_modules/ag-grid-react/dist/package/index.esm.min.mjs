import ps,{Component as ms}from"react";import Ae,{forwardRef as hs,useCallback as Ze,useContext as fs,useEffect as Cs,useImperativeHandle as gs,useMemo as Xe,useRef as ne,useState as xe}from"react";import{BaseComponentWrapper as ys,GridCoreCreator as vs,VanillaFrameworkOverrides as ws,_combineAttributesAndGridOptions as Rs,_getGridOption as et,_getGridRegisteredModules as bs,_isClientSideRowModel as Es,_isServerSideRowModel as Ss,_observeResize as Ps,_processOnChange as ks,_warn as Dt}from"ag-grid-community";import Re,{forwardRef as Fs,useCallback as Ms,useContext as As,useImperativeHandle as xs,useLayoutEffect as Gs,useMemo as tt,useRef as Ge,useState as be}from"react";import{_toString as Ds}from"ag-grid-community";import Bt from"react";var Q=Bt.createContext({}),It=Bt.createContext("default"),Ve=(e,t,s,r)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const l=e.newAgStackInstance();let c,a,o=!1;return l.then(p=>{if(o){t.destroyBean(p);return}c=p,a=c.getGui(),s.appendChild(a),Ot(r,c)}),()=>{o=!0,c&&(a?.parentElement?.removeChild(a),t.destroyBean(c),r&&Ot(r,void 0))}},Ot=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const s=e;s.current=t}};import st from"react";import Bs from"react-dom";var oe=(...e)=>e.filter(s=>s!=null&&s!=="").join(" "),ae=class ls{constructor(...t){this.classesMap={},t.forEach(s=>{this.classesMap[s]=!0})}setClass(t,s){if(!!this.classesMap[t]==s)return this;const n=new ls;return n.classesMap={...this.classesMap},n.classesMap[t]=s,n}toString(){return Object.keys(this.classesMap).filter(s=>this.classesMap[s]).join(" ")}},De=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,s=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===s()},ht=st.version?.split(".")[0],Wt=ht==="16"||ht==="17";function Is(){return ht==="19"}var rt=!1;function Os(e){return rt||setTimeout(()=>rt=!1,0),rt=!0,e()}var Le=(e,t)=>{!Wt&&e&&!rt?Bs.flushSync(t):t()},Ws=e=>{Wt?e():st.startTransition(e)};function Ts(e,t,s){return st.useSyncExternalStore?st.useSyncExternalStore(e,t):s}function nt(e,t,s){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(s||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const r=[],n=[],l=new Map,c=new Map;for(let a=0;a<t.length;a++){const o=t[a];c.set(o.instanceId,o)}for(let a=0;a<e.length;a++){const o=e[a];l.set(o.instanceId,o),c.has(o.instanceId)&&r.push(o)}for(let a=0;a<t.length;a++){const o=t[a],p=o.instanceId;l.has(p)||n.push(o)}return r.length===e.length&&n.length===0?e:r.length===0&&n.length===t.length?t:r.length===0?n:n.length===0?r:[...r,...n]}var Tt=Fs((e,t)=>{const{registry:s,context:r}=As(Q),n=Ge(null),l=Ge(null),c=Ge(null),a=Ge(null),o=Ge(null),p=Ge(),[u,b]=be(),[g,h]=be(),[v,y]=be(),[f,i]=be(()=>new ae),[E,G]=be(()=>new ae("ag-hidden")),[w,C]=be(()=>new ae("ag-hidden")),[H,A]=be(()=>new ae("ag-invisible"));xs(t,()=>({refresh(){return!1}})),Gs(()=>Ve(u,r,l.current),[u]);const U=Ms(O=>{if(n.current=O,!O||r.isDestroyed()){p.current=r.destroyBean(p.current);return}const S={setInnerRenderer:(F,T)=>{b(F),y(T)},setChildCount:F=>h(F),toggleCss:(F,T)=>i(P=>P.setClass(F,T)),setContractedDisplayed:F=>C(T=>T.setClass("ag-hidden",!F)),setExpandedDisplayed:F=>G(T=>T.setClass("ag-hidden",!F)),setCheckboxVisible:F=>A(T=>T.setClass("ag-invisible",!F)),setCheckboxSpacing:F=>A(T=>T.setClass("ag-group-checkbox-spacing",F))},W=s.createDynamicBean("groupCellRendererCtrl",!0);W&&(p.current=r.createBean(W),p.current.init(S,O,c.current,a.current,o.current,Tt,e))},[]),B=tt(()=>`ag-cell-wrapper ${f.toString()}`,[f]),M=tt(()=>`ag-group-expanded ${E.toString()}`,[E]),d=tt(()=>`ag-group-contracted ${w.toString()}`,[w]),m=tt(()=>`ag-group-checkbox ${H.toString()}`,[H]),D=u?.componentFromFramework,j=D?u.componentClass:void 0,R=u==null&&v!=null,$=Ds(v);return Re.createElement("span",{className:B,ref:U,...e.colDef?{}:{role:p.current?.getCellAriaRole()}},Re.createElement("span",{className:M,ref:a}),Re.createElement("span",{className:d,ref:o}),Re.createElement("span",{className:m,ref:c}),Re.createElement("span",{className:"ag-group-value",ref:l},R?$:D?Re.createElement(j,{...u.params}):null),Re.createElement("span",{className:"ag-group-child-count"},g))}),Nt=Tt;import{AgPromise as ft}from"ag-grid-community";import Ht,{memo as Ns,useEffect as Hs,useState as Us}from"react";import{createContext as _s}from"react";var ze=_s({setMethods:()=>{}}),Vs=e=>{const{initialProps:t,addUpdateCallback:s,CustomComponentClass:r,setMethods:n}=e,[{key:l,...c},a]=Us(t);return Hs(()=>{s(o=>a(o))},[]),Ht.createElement(ze.Provider,{value:{setMethods:n}},Ht.createElement(r,{key:l,...c}))},Ls=Ns(Vs);import{createElement as zs}from"react";import{createPortal as js}from"react-dom";import{AgPromise as Ct}from"ag-grid-community";var $s=0;function Ut(){return`agPortalKey_${++$s}`}var _t=class{constructor(e,t,s,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=s,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ut(),this.portalKey=Ut(),this.instanceCreated=this.isStatelessComponent()?Ct.resolve(!1):new Ct(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),s=document.createElement(t||"div");return s.classList.add("ag-react-container"),e.reactContainer=s,s}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const s=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!s){setTimeout(()=>this.callMethod(e,t));return}const r=s[e];if(r)return r.apply(s,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Ct(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=js(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return zs(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const s=this[`${e}Component`];if(!this.suppressFallbackMethods&&s)return s.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function ot(e,t,s){e.forEach(r=>{const n=t[r];n&&(s[r]=n)})}var te=class extends _t{constructor(){super(...arguments),this.awaitUpdateCallback=new ft(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Ls}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:s=>this.setMethods(s),addUpdateCallback:s=>{this.updateCallback=()=>(s(this.getProps()),new ft(r=>{setTimeout(()=>{r()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ot(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ft(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Js=class extends te{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},qs=class extends te{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ks=class extends te{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:s,shake:r}=this;return e.label=t,e.icon=s,e.shake=r,e}};import{AgPromise as Vt}from"ag-grid-community";var Qs=class extends te{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Vt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new Vt(s=>{this.resolveFilterPassCallback=s});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}};import{AgPromise as Ys}from"ag-grid-community";var Zs=class extends te{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Ys(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};import{AgPromise as Xs}from"ag-grid-community";function Lt(e,t){e.parentFilterInstance(s=>{(s.setModel(t)||Xs.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var er=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=s=>this.updateModel(s)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ot(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Lt(this.floatingFilterParams,e)}},tr=class extends te{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Lt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},sr=class extends te{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},rr=class extends te{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},nr=class extends te{refresh(e){this.sourceParams=e,this.refreshProps()}},or=class extends te{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},ar=class extends te{refresh(e){this.sourceParams=e,this.refreshProps()}},cr=class extends te{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ir=class extends te{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};import{AgPromise as lr,_warn as ur}from"ag-grid-community";function dr(e,t){(e?.getInstance?.()??lr.resolve(void 0)).then(r=>t(r))}function at(){ur(231)}var pr=1e3,mr=class{constructor(e,t,s){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=s||pr}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,s){this.portals=[...this.portals,e],this.waitForInstance(t,s),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,s=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-s>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Le(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,s)})}}};import je,{memo as hr,useCallback as ct,useEffect as fr,useMemo as gt,useRef as Be,useState as Ee}from"react";import{GridCtrl as Cr}from"ag-grid-community";import $e,{memo as gr,useCallback as yr,useContext as vr,useMemo as ue,useRef as de,useState as X}from"react";import{CssClassManager as wr,FakeHScrollComp as Rr,FakeVScrollComp as br,GridBodyCtrl as Er,_observeResize as Sr,_setAriaColCount as Pr,_setAriaRowCount as kr}from"ag-grid-community";import it,{memo as Fr,useCallback as Mr,useContext as Ar,useMemo as zt,useRef as jt,useState as $t}from"react";import{GridHeaderCtrl as xr}from"ag-grid-community";import Je,{memo as Gr,useCallback as Dr,useContext as Br,useRef as yt,useState as Jt}from"react";import{HeaderRowContainerCtrl as Ir}from"ag-grid-community";import lt,{memo as Or,useCallback as qt,useContext as Wr,useMemo as vt,useRef as wt,useState as ut}from"react";import{_EmptyBean as Tr}from"ag-grid-community";import qe,{memo as Nr,useCallback as Hr,useContext as Ur,useEffect as _r,useLayoutEffect as Vr,useMemo as Lr,useRef as Ie,useState as Kt}from"react";import{CssClassManager as zr,_EmptyBean as jr,_removeAriaSort as $r,_setAriaSort as Jr}from"ag-grid-community";var qr=({ctrl:e})=>{const t=e.isAlive(),{context:s}=Ur(Q),[r,n]=Kt(),[l,c]=Kt(),a=Ie(),o=Ie(null),p=Ie(null),u=Ie(null),b=Ie(),g=Ie();t&&!g.current&&(g.current=new zr(()=>o.current));const h=Hr(i=>{if(o.current=i,!i||!e.isAlive()||s.isDestroyed()){a.current=s.destroyBean(a.current);return}a.current=s.createBean(new jr);const E=()=>{const w=e.getSelectAllGui();w&&(p.current?.insertAdjacentElement("afterend",w),a.current.addDestroyFunc(()=>w.remove()))},G={setWidth:w=>{o.current&&(o.current.style.width=w)},toggleCss:(w,C)=>g.current.toggleCss(w,C),setUserStyles:w=>c(w),setAriaSort:w=>{o.current&&(w?Jr(o.current,w):$r(o.current))},setUserCompDetails:w=>n(w),getUserCompInstance:()=>b.current||void 0,refreshSelectAllGui:E,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(G,i,p.current,u.current,a.current),E()},[]);Vr(()=>Ve(r,s,u.current,b),[r]),_r(()=>{e.setDragSource(o.current)},[r]);const v=Lr(()=>!!(r?.componentFromFramework&&De(r.componentClass)),[r]),y=r?.componentFromFramework,f=r?.componentClass;return qe.createElement("div",{ref:h,style:l,className:"ag-header-cell",role:"columnheader"},qe.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),qe.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?v?qe.createElement(f,{...r.params}):qe.createElement(f,{...r.params,ref:b}):null))},Kr=Nr(qr);import Se,{memo as Qr,useCallback as Yr,useContext as Zr,useLayoutEffect as Xr,useMemo as Oe,useRef as Pe,useState as ve}from"react";import{useEffect as en}from"react";import{AgPromise as tn,_EmptyBean as sn}from"ag-grid-community";var rn=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ot(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},nn=({ctrl:e})=>{const{context:t,gos:s}=Zr(Q),[r,n]=ve(),[l,c]=ve(()=>new ae("ag-header-cell","ag-floating-filter")),[a,o]=ve(()=>new ae),[p,u]=ve(()=>new ae("ag-floating-filter-button","ag-hidden")),[b,g]=ve("false"),[h,v]=ve(),[,y]=ve(1),f=Pe(),i=Pe(null),E=Pe(null),G=Pe(null),w=Pe(null),C=Pe(),H=Pe(),A=F=>{F!=null&&C.current&&C.current(F)},U=Yr(F=>{if(i.current=F,!F||!e.isAlive()||t.isDestroyed()){f.current=t.destroyBean(f.current);return}f.current=t.createBean(new sn),H.current=new tn(P=>{C.current=P});const T={toggleCss:(P,I)=>c(J=>J.setClass(P,I)),setUserStyles:P=>n(P),addOrRemoveBodyCssClass:(P,I)=>o(J=>J.setClass(P,I)),setButtonWrapperDisplayed:P=>{u(I=>I.setClass("ag-hidden",!P)),g(P?"false":"true")},setWidth:P=>{i.current&&(i.current.style.width=P)},setCompDetails:P=>v(P),getFloatingFilterComp:()=>H.current?H.current:null,setMenuIcon:P=>w.current?.appendChild(P)};e.setComp(T,F,w.current,E.current,f.current)},[]);Xr(()=>Ve(h,t,E.current,A),[h]);const B=Oe(()=>l.toString(),[l]),M=Oe(()=>a.toString(),[a]),d=Oe(()=>p.toString(),[p]),m=Oe(()=>!!(h&&h.componentFromFramework&&De(h.componentClass)),[h]),D=Oe(()=>s.get("reactiveCustomComponents"),[]),j=Oe(()=>s.get("enableFilterHandlers"),[]),[R,$]=ve();en(()=>{if(h?.componentFromFramework)if(D){const F=j?rn:er,T=new F(h.params,()=>y(P=>P+1));A(T),$(T)}else at()},[h]);const O=R?.getProps(),S=h?.componentFromFramework,W=h?.componentClass;return Se.createElement("div",{ref:U,style:r,className:B,role:"gridcell"},Se.createElement("div",{ref:E,className:M,role:"presentation"},S?D?O&&Se.createElement(ze.Provider,{value:{setMethods:F=>R.setMethods(F)}},Se.createElement(W,{...O})):Se.createElement(W,{...h.params,ref:m?()=>{}:A}):null),Se.createElement("div",{ref:G,"aria-hidden":b,className:d,role:"presentation"},Se.createElement("button",{ref:w,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},on=Qr(nn);import Ke,{memo as an,useCallback as cn,useContext as ln,useEffect as un,useLayoutEffect as dn,useMemo as Rt,useRef as Qe,useState as We}from"react";import{_EmptyBean as pn}from"ag-grid-community";var mn=({ctrl:e})=>{const{context:t}=ln(Q),[s,r]=We(),[n,l]=We(()=>new ae),[c,a]=We(()=>new ae),[o,p]=We("false"),[u,b]=We(),[g,h]=We(),v=Qe(),y=Qe(null),f=Qe(null),i=Qe(null),E=Qe(),G=cn(B=>{if(y.current=B,!B||!e.isAlive()||t.isDestroyed()){v.current=t.destroyBean(v.current);return}v.current=t.createBean(new pn);const M={setWidth:d=>{y.current&&(y.current.style.width=d)},toggleCss:(d,m)=>l(D=>D.setClass(d,m)),setUserStyles:d=>r(d),setHeaderWrapperHidden:d=>{const m=i.current;m&&(d?m.style.setProperty("display","none"):m.style.removeProperty("display"))},setHeaderWrapperMaxHeight:d=>{const m=i.current;m&&(d!=null?m.style.setProperty("max-height",`${d}px`):m.style.removeProperty("max-height"),m.classList.toggle("ag-header-cell-comp-wrapper-limited-height",d!=null))},setUserCompDetails:d=>h(d),setResizableDisplayed:d=>{a(m=>m.setClass("ag-hidden",!d)),p(d?"false":"true")},setAriaExpanded:d=>b(d),getUserCompInstance:()=>E.current||void 0};e.setComp(M,B,f.current,i.current,v.current)},[]);dn(()=>Ve(g,t,i.current),[g]),un(()=>{y.current&&e.setDragSource(y.current)},[g]);const w=Rt(()=>!!(g?.componentFromFramework&&De(g.componentClass)),[g]),C=Rt(()=>"ag-header-group-cell "+n.toString(),[n]),H=Rt(()=>"ag-header-cell-resize "+c.toString(),[c]),A=g?.componentFromFramework,U=g?.componentClass;return Ke.createElement("div",{ref:G,style:s,className:C,role:"columnheader","aria-expanded":u},Ke.createElement("div",{ref:i,className:"ag-header-cell-comp-wrapper",role:"presentation"},A?w?Ke.createElement(U,{...g.params}):Ke.createElement(U,{...g.params,ref:E}):null),Ke.createElement("div",{ref:f,"aria-hidden":o,className:H}))},hn=an(mn),fn=({ctrl:e})=>{const{gos:t,context:s}=Wr(Q),{topOffset:r,rowHeight:n}=vt(()=>e.getTopAndHeight(),[]),l=vt(()=>t.get("tabIndex"),[]),[c,a]=ut(()=>e.getAriaRowIndex()),o=e.headerRowClass,[p,u]=ut(()=>n+"px"),[b,g]=ut(()=>r+"px"),h=wt(null),[v,y]=ut(()=>e.getUpdatedHeaderCtrls()),f=wt(),i=wt(null),E=qt(C=>{if(i.current=C,!C||!e.isAlive()||s.isDestroyed()){f.current=s.destroyBean(f.current);return}f.current=s.createBean(new Tr);const H={setHeight:A=>u(A),setTop:A=>g(A),setHeaderCtrls:(A,U,B)=>{const M=h.current,d=nt(M,A,U);d!==M&&(h.current=d,Le(B,()=>y(d)))},setWidth:A=>{i.current&&(i.current.style.width=A)},setRowIndex:A=>{a(A)}};e.setComp(H,f.current,!1)},[]),G=vt(()=>({height:p,top:b}),[p,b]),w=qt(C=>{switch(e.type){case"group":return lt.createElement(hn,{ctrl:C,key:C.instanceId});case"filter":return lt.createElement(on,{ctrl:C,key:C.instanceId});default:return lt.createElement(Kr,{ctrl:C,key:C.instanceId})}},[]);return lt.createElement("div",{ref:E,className:o,role:"row",style:G,tabIndex:l,"aria-rowindex":c},v.map(w))},Cn=Or(fn),gn=({pinned:e})=>{const[t,s]=Jt(!0),[r,n]=Jt([]),{context:l}=Br(Q),c=yt(null),a=yt(null),o=yt(),p=e==="left",u=e==="right",b=!p&&!u,g=Dr(y=>{if(c.current=y,!y||l.isDestroyed()){o.current=l.destroyBean(o.current);return}o.current=l.createBean(new Ir(e));const f={setDisplayed:s,setCtrls:i=>n(i),setCenterWidth:i=>{a.current&&(a.current.style.width=i)},setViewportScrollLeft:i=>{c.current&&(c.current.scrollLeft=i)},setPinnedContainerWidth:i=>{c.current&&(c.current.style.width=i,c.current.style.minWidth=i,c.current.style.maxWidth=i)}};o.current.setComp(f,c.current)},[]),h=t?"":"ag-hidden",v=()=>r.map(y=>Je.createElement(Cn,{ctrl:y,key:y.instanceId}));return p?Je.createElement("div",{ref:g,className:"ag-pinned-left-header "+h,"aria-hidden":!t,role:"rowgroup"},v()):u?Je.createElement("div",{ref:g,className:"ag-pinned-right-header "+h,"aria-hidden":!t,role:"rowgroup"},v()):b?Je.createElement("div",{ref:g,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},Je.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},v())):null},bt=Gr(gn),yn=()=>{const[e,t]=$t(()=>new ae),[s,r]=$t(),{context:n}=Ar(Q),l=jt(null),c=jt(),a=Mr(u=>{if(l.current=u,!u||n.isDestroyed()){c.current=n.destroyBean(c.current);return}c.current=n.createBean(new xr);const b={toggleCss:(g,h)=>t(v=>v.setClass(g,h)),setHeightAndMinHeight:g=>r(g)};c.current.setComp(b,u,u)},[]),o=zt(()=>"ag-header "+e.toString(),[e]),p=zt(()=>({height:s,minHeight:s}),[s]);return it.createElement("div",{ref:a,className:o,style:p,role:"presentation"},it.createElement(bt,{pinned:"left"}),it.createElement(bt,{pinned:null}),it.createElement(bt,{pinned:"right"}))},vn=Fr(yn);import{useEffect as wn}from"react";var Rn=(e,t)=>{wn(()=>{const s=t.current;if(s){const r=s.parentElement;if(r){const n=document.createComment(e);return r.insertBefore(n,s),()=>{r.removeChild(n)}}}},[e])},ke=Rn;import Ye,{memo as bn,useCallback as Te,useContext as En,useMemo as dt,useRef as Ce,useState as Qt}from"react";import{RowContainerCtrl as Sn,_getRowContainerClass as Pn,_getRowContainerOptions as kn,_getRowSpanContainerClass as Fn,_getRowViewportClass as Mn}from"ag-grid-community";import pt,{memo as An,useCallback as Yt,useContext as Zt,useEffect as Xt,useLayoutEffect as xn,useMemo as es,useRef as pe,useState as ge}from"react";import{CssClassManager as Gn,_EmptyBean as Dn}from"ag-grid-community";import me,{Suspense as Bn,memo as In,useCallback as Ne,useContext as On,useLayoutEffect as Et,useMemo as St,useRef as ce,useState as ye}from"react";import{CssClassManager as Wn,_EmptyBean as Tn,_removeFromParent as Nn}from"ag-grid-community";import{AgPromise as Hn}from"ag-grid-community";var Un=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Hn(s=>{this.resolveInstanceCreated=s}),this.onValueChange=s=>this.updateValue(s),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ot(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}};import He from"react";import{memo as _n,useContext as Vn,useLayoutEffect as Ln,useState as zn}from"react";import{createPortal as jn}from"react-dom";import{_getActiveDomElement as $n}from"ag-grid-community";import{useEffect as Jn,useRef as mt,useState as qn}from"react";var Kn=e=>{const t=mt(e),s=mt(),r=mt(!1),n=mt(!1),[,l]=qn(0);r.current&&(n.current=!0),Jn(()=>(r.current||(s.current=t.current(),r.current=!0),l(c=>c+1),()=>{n.current&&s.current?.()}),[])},Qn=e=>{const[t,s]=zn(),r=Vn(Q),{context:n,popupSvc:l,gos:c,editSvc:a}=r,{editDetails:o,cellCtrl:p,eParentCell:u}=e;return Kn(()=>{const{compDetails:b}=o,g=c.get("stopEditingWhenCellsLoseFocus");let h,v;if(!n.isDestroyed()){v=n.createBean(a.createPopupEditorWrapper(b.params));const y=v.getGui();if(e.jsChildComp){const C=e.jsChildComp.getGui();C&&y.appendChild(C)}const{column:f,rowNode:i}=p,E={column:f,rowNode:i,type:"popupCellEditor",eventSource:u,ePopup:y,position:o.popupPosition,keepWithinBounds:!0},G=l?.positionPopupByComponent.bind(l,E),w=l?.addPopup({modal:g,eChild:y,closeOnEsc:!0,closedCallback:()=>{p.onPopupEditorClosed()},anchorToElement:u,positionCallback:G,ariaOwns:u});h=w?w.hideFunc:void 0,s(v),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),n.destroyBean(v)}}),Ln(()=>()=>{p.isCellFocused()&&t?.getGui().contains($n(r))&&u.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?jn(e.wrappedContent,t.getGui()):null},ts=_n(Qn),Yn=(e,t,s)=>{const{compProxy:r}=e;s(r);const n=r.getProps(),l=De(t);return He.createElement(ze.Provider,{value:{setMethods:c=>r.setMethods(c)}},l?He.createElement(t,{...n}):He.createElement(t,{...n,ref:c=>r.setRef(c)}))},ss=(e,t,s)=>e.compProxy?Yn(e,t,s):He.createElement(t,{...e.compDetails.params,ref:s}),Zn=(e,t,s,r,n)=>{const l=e.compDetails,c=l.componentClass,a=l.componentFromFramework&&!e.popup,o=l.componentFromFramework&&e.popup,p=!l.componentFromFramework&&e.popup;return a?ss(e,c,t):o?He.createElement(ts,{editDetails:e,cellCtrl:r,eParentCell:s,wrappedContent:ss(e,c,t)}):p&&n?He.createElement(ts,{editDetails:e,cellCtrl:r,eParentCell:s,jsChildComp:n}):null};import{useCallback as Xn,useContext as eo,useEffect as rs}from"react";var to=(e,t,s,r,n,l)=>{const{context:c}=eo(Q),a=Xn(()=>{const o=n.current;if(!o)return;const p=o.getGui();p&&p.parentElement&&p.parentElement.removeChild(p),c.destroyBean(o),n.current=void 0},[]);rs(()=>{const o=e!=null,p=e?.compDetails&&!e.compDetails.componentFromFramework,u=t&&s==null;if(!(o&&p&&!u)){a();return}const g=e.compDetails;if(n.current){const v=n.current,f=v.refresh!=null&&e.force==!1?v.refresh(g.params):!1;if(f===!0||f===void 0)return;a()}g.newAgStackInstance().then(v=>{if(!v)return;const y=v.getGui();if(!y)return;(t?s:l.current).appendChild(y),n.current=v})},[e,t,r]),rs(()=>a,[])},ns=to;import Pt,{useMemo as so,useRef as ro}from"react";var no=({cellCtrl:e,parent:t})=>{const s=ro(),r=so(()=>{const{loadingComp:n}=e.getDeferLoadingCellRenderer();return n?{value:void 0,compDetails:n,force:!1}:void 0},[e]);if(ns(r,!1,void 0,1,s,t),r?.compDetails?.componentFromFramework){const n=r.compDetails.componentClass;return Pt.createElement(n,{...r.compDetails.params})}return Pt.createElement(Pt.Fragment,null)},oo=({cellCtrl:e,printLayout:t,editingCell:s})=>{const r=On(Q),{context:n}=r,{column:{colIdSanitised:l},instanceId:c}=e,a=ce(),[o,p]=ye(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[u,b]=ye(),[g,h]=ye(1),[v,y]=ye(),[f,i]=ye(!1),[E,G]=ye(!1),[w,C]=ye(!1),[H,A]=ye(),U=St(()=>e.isForceWrapper(),[e]),B=St(()=>e.getCellAriaRole(),[e]),M=ce(null),d=ce(null),m=ce(null),D=ce(),j=ce(),R=ce(),$=ce([]),O=ce(),S=ce(),[W,F]=ye(0),T=Ne(k=>{S.current=k,F(N=>N+1)},[]),P=o!=null&&(f||w||E)&&(u==null||!!u.popup),I=U||P,J=Ne(k=>{if(j.current=k,k){const N=k.isCancelBeforeStart&&k.isCancelBeforeStart();setTimeout(()=>{N?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(k))})}},[e]),se=ce();se.current||(se.current=new Wn(()=>M.current)),ns(o,I,S.current,W,D,M);const ie=ce();Et(()=>{const k=ie.current,N=o;if(ie.current=o,k==null||k.compDetails==null||N==null||N.compDetails==null)return;O.current?.refreshVisibility();const q=k.compDetails,K=N.compDetails;if(q.componentClass!=K.componentClass||m.current?.refresh==null)return;m.current.refresh(K.params)!=!0&&h(V=>V+1)},[o]),Et(()=>{if(!(u&&!u.compDetails.componentFromFramework)||n.isDestroyed())return;const N=u.compDetails,q=u.popup===!0,K=N.newAgStackInstance();return K.then(x=>{if(!x)return;const V=x.getGui();J(x),q||((U?R:M).current?.appendChild(V),x.afterGuiAttached&&x.afterGuiAttached()),A(x)}),()=>{K.then(x=>{const V=x.getGui();e.disableEditorTooltipFeature(),n.destroyBean(x),J(void 0),A(void 0),V?.parentElement?.removeChild(V)})}},[u]);const Fe=Ne(k=>{if(R.current=k,!k||n.isDestroyed()||!e.isAlive()){const K=$.current;$.current=[];for(const x of K)x();return}let N;const q=K=>{K&&(k.insertAdjacentElement("afterbegin",K.getGui()),$.current.push(()=>{Nn(K.getGui()),n.destroyBean(K),O.current===N&&(O.current=void 0)}))};f&&q(e.createSelectionCheckbox()),w&&q(e.createDndSource()),E&&(N=e.createRowDragComp(),O.current=N,N&&(q(N),N.refreshVisibility()))},[e,n,w,E,f]),Me=Ne(()=>{const k=!e.isCellSpanning()||d.current,N=M.current;if(!N||!k||!e||!e.isAlive()||n.isDestroyed()){a.current=n.destroyBean(a.current);return}a.current=n.createBean(new Tn);const q={toggleCss:(x,V)=>se.current.toggleCss(x,V),setUserStyles:x=>y(x),getFocusableElement:()=>M.current,setIncludeSelection:x=>i(x),setIncludeRowDrag:x=>G(x),setIncludeDndSource:x=>C(x),getCellEditor:()=>j.current||null,getCellRenderer:()=>m.current??D.current,getParentOfValue:()=>S.current??R.current??M.current,setRenderDetails:(x,V,z)=>{const fe=()=>{p(Z=>Z?.compDetails!==x||Z?.value!==V||Z?.force!==z?{value:V,compDetails:x,force:z}:Z)};if(x?.params?.deferRender&&!e.rowNode.group){const{loadingComp:Z,onReady:le}=e.getDeferLoadingCellRenderer();if(Z){p({value:void 0,compDetails:Z,force:!1}),le.then(()=>Ws(fe));return}}fe()},setEditDetails:(x,V,z,fe)=>{if(x){let Z;x.componentFromFramework&&(fe?Z=new Un(x.params,()=>h(le=>le+1)):at()),b({compDetails:x,popup:V,popupPosition:z,compProxy:Z}),V||p(void 0)}else e.hasBrowserFocus()&&q.getFocusableElement().focus({preventScroll:!0}),b(le=>{le?.compProxy&&(j.current=void 0)})},refreshEditStyles:(x,V)=>{if(!M.current)return;const{current:z}=se;z.toggleCss("ag-cell-value",!I),z.toggleCss("ag-cell-inline-editing",!!x&&!V),z.toggleCss("ag-cell-popup-editing",!!x&&!!V),z.toggleCss("ag-cell-not-inline-editing",!x||!!V)}},K=R.current||void 0;e.setComp(q,N,d.current??void 0,K,t,s,a.current)},[]),_e=Ne(k=>{M.current=k,Me()},[]),_=Ne(k=>{d.current=k,Me()},[]),we=St(()=>!!(o?.compDetails?.componentFromFramework&&De(o.compDetails.componentClass)),[o]);Et(()=>{if(!M.current)return;const{current:k}=se;k.toggleCss("ag-cell-value",!I),k.toggleCss("ag-cell-inline-editing",!!u&&!u.popup),k.toggleCss("ag-cell-popup-editing",!!u&&!!u.popup),k.toggleCss("ag-cell-not-inline-editing",!u||!!u.popup)});const Y=()=>{const{compDetails:k,value:N}=o;if(!k)return N?.toString?.()??N;if(k.componentFromFramework){const q=k.componentClass;return me.createElement(Bn,{fallback:me.createElement(no,{cellCtrl:e,parent:M})},we?me.createElement(q,{...k.params,key:g}):me.createElement(q,{...k.params,key:g,ref:m}))}},re=()=>{const k=()=>o==null?null:I?me.createElement("span",{role:"presentation",id:`cell-${c}`,className:"ag-cell-value",ref:T},Y()):Y(),N=q=>Zn(q,J,M.current,e,H);return u!=null?u.popup?me.createElement(me.Fragment,null,k(),N(u)):N(u):k()},he=()=>me.createElement("div",{ref:_e,style:v,role:B,"col-id":l},I?me.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Fe},re()):re());return e.isCellSpanning()?me.createElement("div",{ref:_,className:"ag-spanned-cell-wrapper",role:"presentation"},he()):he()},ao=In(oo),co=({rowCtrl:e,containerType:t})=>{const{context:s,gos:r,editSvc:n}=Zt(Q),l=Zt(It)==="default",c=pe(),a=pe(e.getDomOrder()),o=e.isFullWidth(),p=e.rowNode.displayed,[u,b]=ge(()=>p?e.rowNode.getRowIndexString():null),[g,h]=ge(()=>e.rowId),[v,y]=ge(()=>e.businessKey),[f,i]=ge(()=>e.rowStyles),E=pe(null),[G,w]=ge(()=>null),[C,H]=ge(),[A,U]=ge(()=>p?e.getInitialRowTop(t):void 0),[B,M]=ge(()=>p?e.getInitialTransform(t):void 0),d=pe(null),m=pe(),D=pe(),j=pe(!1),[R,$]=ge(0);Xt(()=>{if(j.current||!C||R>10)return;const _=d.current?.firstChild;_?(e.setupDetailRowAutoHeight(_),j.current=!0):$(we=>we+1)},[C,R]);const O=pe();O.current||(O.current=new Gn(()=>d.current));const S=pe(()=>{}),W=Yt(_=>(S.current=_,()=>{S.current=()=>{}}),[]),F=Ts(W,()=>E.current,[]),T=l?F:G,P=Yt(_=>{if(d.current=_,c.current=_?s.createBean(new Dn):s.destroyBean(c.current),!_){e.unsetComp(t);return}if(!e.isAlive()||s.isDestroyed())return;const we={setTop:U,setTransform:M,toggleCss:(Y,re)=>O.current.toggleCss(Y,re),setDomOrder:Y=>a.current=Y,setRowIndex:b,setRowId:h,setRowBusinessKey:y,setUserStyles:i,setCellCtrls:(Y,re)=>{const he=E.current,k=nt(he,Y,a.current);k!==he&&(E.current=k,l?S.current():Le(re,()=>w(k)))},showFullWidth:Y=>{D.current=Y.params,H(Y)},getFullWidthCellRenderer:()=>m.current,getFullWidthCellRendererParams:()=>D.current,refreshFullWidth:Y=>{const re=Y();return D.current=re,Fe.current?(H(he=>({...he,params:re})),!0):!m.current||!m.current.refresh?!1:m.current.refresh(re)}};e.setComp(we,_,t,c.current)},[]);xn(()=>Ve(C,s,d.current,m),[C]);const I=es(()=>{const _={top:A,transform:B};return Object.assign(_,f),_},[A,B,f]),J=o&&C?.componentFromFramework,se=!o&&T!=null,ie=es(()=>!!(C?.componentFromFramework&&De(C.componentClass)),[C]),Fe=pe(!1);Xt(()=>{Fe.current=ie&&!!C&&!!r.get("reactiveCustomComponents")},[ie,C]);const Me=()=>T?.map(_=>pt.createElement(ao,{cellCtrl:_,editingCell:n?.isEditing(_,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:_.instanceId})),_e=()=>{const _=C.componentClass;return ie?pt.createElement(_,{...C.params}):pt.createElement(_,{...C.params,ref:m})};return pt.createElement("div",{ref:P,role:"row",style:I,"row-index":u,"row-id":g,"row-business-key":v},se?Me():J?_e():null)},os=An(co),io=({name:e})=>{const{context:t,gos:s}=En(Q),r=dt(()=>kn(e),[e]),n=Ce(null),l=Ce(null),c=Ce(null),a=Ce([]),o=Ce([]),[p,u]=Qt(()=>[]),b=!!s.get("enableCellSpan")&&!!r.getSpannedRowCtrls,g=Ce([]),h=Ce([]),[v,y]=Qt(()=>[]),f=Ce(!1),i=Ce(),E=dt(()=>oe("ag-viewport",Mn(e)),[e]),G=dt(()=>oe(Pn(e)),[e]),w=dt(()=>oe("ag-spanning-container",Fn(e)),[e]),C=r.type==="center"||b,H=C?n:l;ke(" AG Row Container "+e+" ",H);const A=Te(()=>{const R=!C||n.current!=null,$=l.current!=null,O=!b||c.current!=null;return R&&$&&O},[]),U=Te(()=>n.current==null&&l.current==null&&c.current==null,[]),B=Te(()=>{if(U()&&(i.current=t.destroyBean(i.current)),!t.isDestroyed()&&A()){const R=S=>{const W=nt(o.current,a.current,f.current);W!==o.current&&(o.current=W,Le(S,()=>u(W)))},$=S=>{const W=nt(h.current,g.current,f.current);W!==h.current&&(h.current=W,Le(S,()=>y(W)))},O={setHorizontalScroll:S=>{n.current&&(n.current.scrollLeft=S)},setViewportHeight:S=>{n.current&&(n.current.style.height=S)},setRowCtrls:({rowCtrls:S,useFlushSync:W})=>{const F=!!W&&a.current.length>0&&S.length>0;a.current=S,R(F)},setSpannedRowCtrls:(S,W)=>{const F=!!W&&g.current.length>0&&S.length>0;g.current=S,$(F)},setDomOrder:S=>{f.current!=S&&(f.current=S,R(!1))},setContainerWidth:S=>{l.current&&(l.current.style.width=S)},setOffsetTop:S=>{l.current&&(l.current.style.transform=`translateY(${S})`)}};i.current=t.createBean(new Sn(e)),i.current.setComp(O,l.current,c.current??void 0,n.current)}},[A,U]),M=Te(R=>{l.current=R,B()},[B]),d=Te(R=>{c.current=R,B()},[B]),m=Te(R=>{n.current=R,B()},[B]),D=()=>Ye.createElement("div",{className:G,ref:M,role:C?"presentation":"rowgroup"},p.map(R=>Ye.createElement(os,{rowCtrl:R,containerType:r.type,key:R.instanceId})));if(!C)return D();const j=()=>Ye.createElement("div",{className:w,ref:d,role:"presentation"},v.map(R=>Ye.createElement(os,{rowCtrl:R,containerType:r.type,key:R.instanceId})));return Ye.createElement("div",{className:E,ref:m,role:"rowgroup"},D(),b?j():null)},lo=bn(io),uo=()=>{const e=vr(Q),{context:t,overlays:s}=e,[r,n]=X(""),[l,c]=X(0),[a,o]=X(0),[p,u]=X("0px"),[b,g]=X("0px"),[h,v]=X("100%"),[y,f]=X("0px"),[i,E]=X("0px"),[G,w]=X("100%"),[C,H]=X(!0),[A,U]=X(!0),[B,M]=X(null),[d,m]=X(""),[D,j]=X(null),[R,$]=X("ag-layout-normal"),O=de();O.current||(O.current=new wr(()=>S.current));const S=de(null),W=de(null),F=de(null),T=de(null),P=de(null),I=de(null),J=de(null),se=de([]),ie=de([]);ke(" AG Grid Body ",S),ke(" AG Pinned Top ",W),ke(" AG Sticky Top ",F),ke(" AG Middle ",I),ke(" AG Pinned Bottom ",J);const Fe=yr(z=>{if(S.current=z,!z||t.isDestroyed()){se.current=t.destroyBeans(se.current),ie.current.forEach(L=>L()),ie.current=[];return}const fe=(L,ee)=>{L.appendChild(ee),ie.current.push(()=>L.removeChild(ee))},Z=L=>{const ee=t.createBean(new L);return se.current.push(ee),ee},le=(L,ee,ds)=>{fe(L,document.createComment(ds)),fe(L,Z(ee).getGui())};le(z,Rr," AG Fake Horizontal Scroll ");const xt=s?.getOverlayWrapperCompClass();xt&&le(z,xt," AG Overlay Wrapper "),P.current&&le(P.current,br," AG Fake Vertical Scroll ");const us={setRowAnimationCssOnBodyViewport:n,setColumnCount:L=>{S.current&&Pr(S.current,L)},setRowCount:L=>{S.current&&kr(S.current,L)},setTopHeight:c,setBottomHeight:o,setStickyTopHeight:u,setStickyTopTop:g,setStickyTopWidth:v,setTopInvisible:H,setBottomInvisible:U,setColumnMovingCss:(L,ee)=>O.current.toggleCss(L,ee),updateLayoutClasses:$,setAlwaysVerticalScrollClass:M,setPinnedTopBottomOverflowY:m,setCellSelectableCss:(L,ee)=>j(ee?L:null),setBodyViewportWidth:L=>{I.current&&(I.current.style.width=L)},registerBodyViewportResizeListener:L=>{if(I.current){const ee=Sr(e,I.current,L);ie.current.push(()=>ee())}},setStickyBottomHeight:f,setStickyBottomBottom:E,setStickyBottomWidth:w,setGridRootRole:L=>z.setAttribute("role",L)},Gt=t.createBean(new Er);se.current.push(Gt),Gt.setComp(us,z,I.current,W.current,J.current,F.current,T.current)},[]),Me=ue(()=>oe("ag-root","ag-unselectable",R),[R]),_e=ue(()=>oe("ag-body-viewport",r,R,B,D),[r,R,B,D]),_=ue(()=>oe("ag-body",R),[R]),we=ue(()=>oe("ag-floating-top",C?"ag-invisible":null,D),[D,C]),Y=ue(()=>oe("ag-sticky-top",D),[D]),re=ue(()=>oe("ag-sticky-bottom",y==="0px"?"ag-invisible":null,D),[D,y]),he=ue(()=>oe("ag-floating-bottom",A?"ag-invisible":null,D),[D,A]),k=ue(()=>({height:l,minHeight:l,overflowY:d}),[l,d]),N=ue(()=>({height:p,top:b,width:h}),[p,b,h]),q=ue(()=>({height:y,bottom:i,width:G}),[y,i,G]),K=ue(()=>({height:a,minHeight:a,overflowY:d}),[a,d]),x=z=>$e.createElement(lo,{name:z,key:`${z}-container`}),V=({section:z,children:fe,className:Z,style:le})=>$e.createElement("div",{ref:z,className:Z,role:"presentation",style:le},fe.map(x));return $e.createElement("div",{ref:Fe,className:Me},$e.createElement(vn,null),V({section:W,className:we,style:k,children:["topLeft","topCenter","topRight","topFullWidth"]}),$e.createElement("div",{className:_,ref:P,role:"presentation"},V({section:I,className:_e,children:["left","center","right","fullWidth"]})),V({section:F,className:Y,style:N,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),V({section:T,className:re,style:q,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),V({section:J,className:he,style:K,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},po=gr(uo);import kt,{forwardRef as mo,memo as ho,useCallback as Ft,useContext as fo,useImperativeHandle as Co,useRef as Mt}from"react";import{TabGuardClassNames as At,TabGuardCtrl as go}from"ag-grid-community";var yo=(e,t)=>{const{children:s,eFocusableElement:r,onTabKeyDown:n,gridCtrl:l,forceFocusOutWhenTabGuardsAreEmpty:c,isEmpty:a}=e,{context:o}=fo(Q),p=Mt(null),u=Mt(null),b=Mt(),g=i=>{const E=i==null?void 0:parseInt(i,10).toString();[p,u].forEach(G=>{E===void 0?G.current?.removeAttribute("tabindex"):G.current?.setAttribute("tabindex",E)})};Co(t,()=>({forceFocusOutOfContainer(i){b.current?.forceFocusOutOfContainer(i)}}));const h=Ft(()=>{const i=p.current,E=u.current;if(!i&&!E||o.isDestroyed()){b.current=o.destroyBean(b.current);return}if(i&&E){const G={setTabIndex:g};b.current=o.createBean(new go({comp:G,eTopGuard:i,eBottomGuard:E,eFocusableElement:r,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:c,focusInnerElement:w=>l.focusInnerElement(w),isEmpty:a}))}},[]),v=Ft(i=>{p.current=i,h()},[h]),y=Ft(i=>{u.current=i,h()},[h]),f=i=>{const E=i==="top"?At.TAB_GUARD_TOP:At.TAB_GUARD_BOTTOM;return kt.createElement("div",{className:`${At.TAB_GUARD} ${E}`,role:"presentation",ref:i==="top"?v:y})};return kt.createElement(kt.Fragment,null,f("top"),s,f("bottom"))},vo=mo(yo),wo=ho(vo),Ro=({context:e})=>{const[t,s]=Ee(""),[r,n]=Ee(""),[l,c]=Ee(null),[a,o]=Ee(null),[p,u]=Ee(!1),[b,g]=Ee(),h=Be(),v=Be(null),y=Be(),[f,i]=Ee(null),E=Be(()=>{}),G=Be(),w=Be([]),C=ct(()=>{},[]);ke(" AG Grid ",v);const H=ct(m=>{if(v.current=m,h.current=m?e.createBean(new Cr):e.destroyBean(h.current),!m||e.isDestroyed())return;const D=h.current;E.current=D.focusInnerElement.bind(D);const j={destroyGridUi:()=>{},setRtlClass:s,forceFocusOutOfContainer:R=>{if(!R&&G.current?.isDisplayed()){G.current.forceFocusOutOfContainer(R);return}y.current?.forceFocusOutOfContainer(R)},updateLayoutClasses:n,getFocusableContainers:()=>{const R=[],$=v.current?.querySelector(".ag-root");return $&&R.push({getGui:()=>$}),w.current.forEach(O=>{O.isDisplayed()&&R.push(O)}),R},setCursor:c,setUserSelect:o};D.setComp(j,m,m),u(!0)},[]);fr(()=>{const m=h.current,D=v.current;if(!b||!m||!f||!D||e.isDestroyed())return;const j=[],{watermarkSelector:R,paginationSelector:$,sideBarSelector:O,statusBarSelector:S,gridHeaderDropZonesSelector:W}=m.getOptionalSelectors(),F=[];if(W){const P=e.createBean(new W.component),I=P.getGui();D.insertAdjacentElement("afterbegin",I),F.push(I),j.push(P)}if(O){const P=e.createBean(new O.component),I=P.getGui(),J=f.querySelector(".ag-tab-guard-bottom");J&&(J.insertAdjacentElement("beforebegin",I),F.push(I)),j.push(P),w.current.push(P)}const T=P=>{const I=e.createBean(new P),J=I.getGui();return D.insertAdjacentElement("beforeend",J),F.push(J),j.push(I),I};if(S&&T(S.component),$){const P=T($.component);G.current=P,w.current.push(P)}return R&&T(R.component),()=>{e.destroyBeans(j),F.forEach(P=>{P.parentElement?.removeChild(P)})}},[b,f,e]);const A=gt(()=>oe("ag-root-wrapper",t,r),[t,r]),U=gt(()=>oe("ag-root-wrapper-body","ag-focus-managed",r),[r]),B=gt(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:l??""}),[a,l]),M=ct(m=>{y.current=m,g(m!==null)},[]),d=ct(()=>!h.current?.isFocusable(),[]);return je.createElement("div",{ref:H,className:A,style:B,role:"presentation"},je.createElement("div",{className:U,ref:i,role:"presentation"},p&&f&&!e.isDestroyed()&&je.createElement(Q.Provider,{value:e.getBeans()},je.createElement(wo,{ref:M,eFocusableElement:f,onTabKeyDown:C,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:d},je.createElement(po,null)))))},bo=hr(Ro);import{BeanStub as Eo}from"ag-grid-community";var So=class extends Eo{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},as={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Po={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...as},cs=new Set(Object.keys(Po)),ko=new Set(Object.keys(as)),is=e=>{const t=ne(),s=ne(null),r=ne(null),n=ne([]),l=ne([]),c=ne(e),a=ne(),o=ne(),p=ne(!1),[u,b]=xe(void 0),[,g]=xe(0),h=Ze(i=>{if(s.current=i,!i){n.current.forEach(d=>d()),n.current.length=0;return}const E=e.modules||[];r.current||(r.current=new mr(()=>g(d=>d+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{r.current?.destroy(),r.current=null}));const G=Rs(e.gridOptions,e,Object.keys(e).filter(d=>!cs.has(d))),w=()=>{if(p.current){const d=()=>a.current?.shouldQueueUpdates()?void 0:l.current.shift();let m=d();for(;m;)m(),m=d()}},C=new xo(w);a.current=C;const H=new So,A={providedBeanInstances:{frameworkCompWrapper:new Mo(r.current,G),renderStatus:H},modules:E,frameworkOverrides:C,setThemeOnGridDiv:!0},U=d=>{b(d),d.createBean(H),n.current.push(()=>{d.destroy()}),d.getBean("ctrlsSvc").whenReady({addDestroyFunc:m=>{n.current.push(m)}},()=>{if(d.isDestroyed())return;const m=t.current;m&&e.passGridApi?.(m)})},B=d=>{d.getBean("ctrlsSvc").whenReady({addDestroyFunc:m=>{n.current.push(m)}},()=>{l.current.forEach(m=>m()),l.current.length=0,p.current=!0})},M=new vs;G.gridId??(G.gridId=o.current),t.current=M.create(i,G,U,B,A),n.current.push(()=>{t.current=void 0}),t.current&&(o.current=t.current.getGridId())},[]),v=Xe(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),y=Ze(i=>{p.current&&!a.current?.shouldQueueUpdates()?i():l.current.push(i)},[]);Cs(()=>{const i=Fo(c.current,e);c.current=e,y(()=>{t.current&&ks(i,t.current)})},[e]);const f=!Ae.useSyncExternalStore||et(e,"renderingMode")==="legacy"?"legacy":"default";return Ae.createElement("div",{style:v,className:e.className,ref:h},Ae.createElement(It.Provider,{value:f},u&&!u.isDestroyed()?Ae.createElement(bo,{key:u.instanceId,context:u}):null,r.current?.getPortals()??null))};function Fo(e,t){const s={};return Object.keys(t).forEach(r=>{if(cs.has(r)){ko.has(r)&&Dt(274,{prop:r});return}const n=t[r];e[r]!==n&&(s[r]=n)}),s}var Mo=class extends ys{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const s=this.gridOptions;if(et(s,"reactiveCustomComponents")){const c=(a=>{switch(a){case"filter":return et(s,"enableFilterHandlers")?Zs:Qs;case"floatingFilterComponent":return et(s,"enableFilterHandlers")?sr:tr;case"dateComponent":return qs;case"dragAndDropImageComponent":return Ks;case"loadingOverlayComponent":return nr;case"noRowsOverlayComponent":return ar;case"statusPanel":return cr;case"toolPanel":return ir;case"menuItem":return or;case"cellRenderer":return Js;case"innerHeaderComponent":return rr}})(t.name);if(c)return new c(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":at();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new _t(e,this.parent,t,n)}},Ao=hs((e,t)=>{const s=fs(Q),{registry:r,context:n,gos:l,rowModel:c}=s,[a,o]=xe(()=>new ae),[p,u]=xe(()=>new ae),[b,g]=xe(),[h,v]=xe(),y=ne(),f=ne(null),i=ne(),E=Xe(()=>bs(e.api.getGridId(),b?.rowModelType??"clientSide"),[e]),G=Xe(()=>a.toString()+" ag-details-row",[a]),w=Xe(()=>p.toString()+" ag-details-grid",[p]);t&&gs(t,()=>({refresh(){return y.current?.refresh()??!1}})),e.template&&Dt(230);const C=Ze(A=>{if(f.current=A,!A||n.isDestroyed()){y.current=n.destroyBean(y.current),i.current?.();return}const U={toggleCss:(M,d)=>o(m=>m.setClass(M,d)),toggleDetailGridCss:(M,d)=>u(m=>m.setClass(M,d)),setDetailGrid:M=>g(M),setRowData:M=>v(M),getGui:()=>f.current},B=r.createDynamicBean("detailCellRendererCtrl",!0);if(B&&(n.createBean(B),B.init(U,e),y.current=B,l.get("detailRowAutoHeight"))){const M=()=>{if(f.current==null)return;const d=f.current.clientHeight;d!=null&&d>0&&setTimeout(()=>{e.node.setRowHeight(d),(Es(l,c)||Ss(l,c))&&c.onRowHeightChanged()},0)};i.current=Ps(s,A,M),M()}},[]),H=Ze(A=>{y.current?.registerDetailWithMaster(A)},[]);return Ae.createElement("div",{className:G,ref:C},b&&Ae.createElement(is,{className:w,...b,modules:E,rowData:h,passGridApi:H}))}),xo=class extends ws{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Nt,agGroupRowRenderer:Nt,agDetailCellRenderer:Ao},this.wrapIncoming=(t,s)=>s==="ensureVisible"?Os(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Is()}},Go=class extends ms{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return ps.createElement(is,{...this.props,passGridApi:this.setGridApi})}};import{useContext as Do}from"react";function Ue(e){const{setMethods:t}=Do(ze);t(e)}function Bo(e){Ue(e)}function Io(e){return Ue(e)}function Oo(e){return Ue(e)}function Wo(e){return Ue(e)}function To(e){Ue(e)}function No(e){Ue(e)}export{Go as AgGridReact,ze as CustomComponentContext,dr as getInstance,Bo as useGridCellEditor,Io as useGridDate,Oo as useGridFilter,Wo as useGridFilterDisplay,To as useGridFloatingFilter,No as useGridMenuItem,at as warnReactiveCustomComponents};
